<!doctype html><html class=no-js lang=it-it><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Redirezionare l'output di OBS su webcam virtuale - Luccalug</title><script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script><meta name=description content><meta property="og:title" content="Redirezionare l'output di OBS su webcam virtuale"><meta property="og:description" content="In questo post mostreremo come redirezionare l'output di OBS verso un device v4l di loopback in modo da avere un flusso video totalmente controllabile per tutte quelle applicazioni che sfruttano input da webcam (videoconferenze ecc)."><meta property="og:type" content="article"><meta property="og:url" content="https://www.luccalug.it/post/obs2cam/"><meta property="article:published_time" content="2020-03-27T14:42:15+01:00"><meta property="article:modified_time" content="2020-03-27T14:42:15+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redirezionare l'output di OBS su webcam virtuale"><meta name=twitter:description content="In questo post mostreremo come redirezionare l'output di OBS verso un device v4l di loopback in modo da avere un flusso video totalmente controllabile per tutte quelle applicazioni che sfruttano input da webcam (videoconferenze ecc)."><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class=container><a class="logo flex" href=/ title=Luccalug rel=home><div><img class=logo__img alt=Logo src=/img/luccalug.png></div><div class=logo__text><div class=logo__title>Luccalug</div><div class=logo__tagline>Lucca Linux user group</div></div></a><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/associazione/><span class=menu__text>Associazione</span></a></li><li class=menu__item><a class=menu__link href=/attivit%C3%A0/><span class=menu__text>Attività</span></a></li><li class=menu__item><a class=menu__link href=/calendario/><span class=menu__text>Calendario</span></a></li><li class=menu__item><a class=menu__link href=/contatti/><span class=menu__text>Contatti</span></a></li><li class=menu__item><a class=menu__link href=/linuxday/><span class=menu__text>Linux Day</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Redirezionare l'output di OBS su webcam virtuale</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-03-27T14:42:15>27-03-2020</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/guide/ rel=category>Guide</a>, <a class=meta__link href=/categories/progetti/ rel=category>Progetti</a></span></div></div></header><figure class=post__thumbnail><img src=/thumb/obs2cam.jpg alt="Redirezionare l'output di OBS su webcam virtuale"></figure><div class="content post__content clearfix"><p>In questo post mostreremo come redirezionare l'output di OBS verso un device v4l di loopback in modo da avere un flusso video totalmente controllabile per tutte quelle applicazioni che sfruttano input da webcam (videoconferenze ecc).</p><p><a href=https://it.wikipedia.org/wiki/Open_Broadcaster_Software>Cos'è OBS?</a></p><p>Questa guida nasce a seguito di alcuni esperimenti partiti nel lontano 2016 <a href=https://twitter.com/gulli_linux/status/784131414434471936>insieme ai ragazzi del Gulli</a> con l'obbiettivo di creare uno streaming unificato dei vari Linux Day organizzati in Toscana quell'anno.
A seguito dei vari smanettamenti, soddisfatti dalle potenzialità di OBS, emerse la curiosità di sfruttarlo al di fuori delle piattaforme di streaming che già supporta e impiegarlo anche con programmi come Skype, Hangout e simili per arricchire il proprio flusso video a favore degli altri partecipanti (immaginate una lezione online dove un professore può cambiare diverse webcam, aggiungere immagini o scritte al volo, indipendentemente dalla piattaforma).</p><p>Visto il periodo di quarantena e l'aumento forzato della didattica digitale, ho deciso di riprendere in mano la questione e ho finalmente trovato una soluzione funzionale e semplice.</p><p>NB: La guida funziona solo su Linux ed è stata testata con Solus Budgie 4.1, Ubuntu 18.04LTS e Archlinux, <strong>per Windows</strong> consiglio di guardare <a href=https://github.com/CatxFish/obs-virtual-cam>questo progetto</a>.</p><h2 id=cosa-andremo-a-fare>Cosa andremo a fare</h2><ul><li><p>Andremo a creare una webcam virtuale di loopback, ovvero un device v4l che riporta in output il video che riceve in input rispettando il formato di una webcam reale.</p></li><li><p>Utilizzeremo OBS per generare il contenuto video</p></li><li><p>Il Plugin per OBS v4l2sink fungerà da ponte per portare l'output di OBS alla webcam virtuale.</p></li></ul><p>Schematizzando:</p><blockquote><p>OBS &ndash;[v4l2sink]&ndash;> /dev/videoX (creata con v4l2loopback) &ndash;> Skype/Hangout/altro</p></blockquote><h2 id=installazione>Installazione</h2><ul><li><p>Installiamo ffmpeg e OBS utilizzando i ppa del progetto</p><pre><code>  sudo apt-get install ffmpeg
  sudo add-apt-repository ppa:obsproject/obs-studio
  sudo apt-get update
  sudo apt-get install obs-studio
</code></pre></li></ul><p>Per le altre distro guardate il vostro package manager o le istruzioni ufficiali <a href=https://obsproject.com/wiki/install-instructions#linux>https://obsproject.com/wiki/install-instructions#linux</a></p><ul><li><p>Installiamo v4l2loopback</p><pre><code>  sudo apt-get install v4l2loopback-dkms v4l2loopback-utils
</code></pre></li></ul><p>Per le altre distro guardate il vostro package manager o le istruzioni per la compilazione dalla <a href=https://github.com/umlaeute/v4l2loopback>repo</a></p><ul><li><p>Installiamo v4l2sink</p><pre><code>  wget https://github.com/CatxFish/obs-v4l2sink/releases/latest/download/obs-v4l2sink.deb
  sudo apt install ./obs-v4l2sink.deb
</code></pre></li></ul><p>Per le altre distro guardate il vostro package manager o le istruzioni per la compilazione dalla <a href=%C3%A7https://github.com/CatxFish/obs-v4l2sink>repo</a></p><h2 id=uso>Uso</h2><p>Carichiamo il module v4l2loopback</p><pre><code>    sudo modprobe v4l2loopback video_nr=42 card_label=&quot;obs-cam&quot; exclusive_caps=1
    v4l2-ctl -d /dev/video42 -c timeout=3000
</code></pre><p>Dovrebbe essersi creato il device <strong>/dev/video42</strong></p><pre><code>    Aprite OBS -&gt; Strumenti -&gt; v4l2sink 
</code></pre><p>Nella finestra che compare indicate il path del device appena creato (nel nostro caso /dev/video42), lasciate il campo &ldquo;video format&rdquo; invariato.</p><p>Cliccate su start</p><p>Fatto! Lo stream video è redirezionato, provate il funzionamento con <a href=https://webcamtests.com/>questo sito</a></p><h2 id=troubleshooting>Troubleshooting</h2><h3 id=format-not-supported>Format not supported</h3><p>Se cliccando su &ldquo;start streaming&rdquo; vi compare l'errore &ldquo;format not supported&rdquo; provate a reinstallare v4l2loopback compilandolo direttamente dalla repository ufficiale</p><h3 id=shifting-dellimmaginecolori>Shifting dell'immagine/colori</h3><p>Se l'immagine emessa dalla webcam virtuale è shiftata o presenta una modifica nei colori potrebbe esserci un problema nella configurazione video di OBS, eseguite la configurazione automatica dal menu &ldquo;Strumenti&rdquo; oppure dalle impostazioni cliccate sulla tab &ldquo;Avanzate&rdquo; e modificate il formato video in &ldquo;I444&rdquo; e lo spazio colore in &ldquo;601&rdquo;</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/obs/ rel=tag>obs</a></li><li class=tags__item><a class="tags__link btn" href=/tags/v4l/ rel=tag>v4l</a></li><li class=tags__item><a class="tags__link btn" href=/tags/v4l2loopback/ rel=tag>v4l2loopback</a></li><li class=tags__item><a class="tags__link btn" href=/tags/v4l2sink/ rel=tag>v4l2sink</a></li><li class=tags__item><a class="tags__link btn" href=/tags/streaming/ rel=tag>streaming</a></li></ul></div></footer></article></main><nav class="post-nav flex"><div class="post-nav__item post-nav__item--prev"><a class=post-nav__link href=/post/serateatema2020/ rel=prev><span class=post-nav__caption>«&#8201;Precedente</span><p class=post-nav__post-title>Serate a tema 2020</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2020 Luccalug.
<span class=footer__copyright-credits>Generato con <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> e il tema <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>